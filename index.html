<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juego del Impostor</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon32.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>
<body>
  <button id="btn-lang" class="lang-toggle" type="button" aria-label="Cambiar idioma" title="Cambiar idioma">ES</button>

<section id="screen-start">
  <div class="hero">
    <div id="home-intro">
      <div class="hero-icon">游꿠</div>
      <h1 class="game-title" data-i18n="title">쯈ui칠n es el impostor?</h1>
      <p class="game-subtitle" data-i18n="subtitle">
        Un juego r치pido de deducci칩n social para grupos
      </p>

      <ul class="how-to">
        <li data-i18n="how1">Elige jugadores y tema</li>
        <li data-i18n="how2">Descubre tu rol en secreto</li>
        <li data-i18n="how3">Encuentra al impostor</li>
      </ul>
    </div>

    <div class="mode-select">
      <button id="mode-offline" class="mode-btn active" type="button" data-i18n="offlineMode">Modo offline</button>
      <button id="mode-online" class="mode-btn" type="button" data-i18n="onlineMode">Modo online</button>
    </div>

    <div id="offline-panel" class="mode-panel">
      <button id="btn-start" data-i18n="play">Jugar</button>
    </div>

    <div id="online-panel" class="mode-panel hidden">
      <p class="mode-description" data-i18n="onlineModeDesc">
        Este modo permite jugar desde varios dispositivos. Un jugador crea la sala y los dem치s se unen usando el c칩digo de sala generado. As칤gnate un nombre y despu칠s crea o 칰nete a una sala.
      </p>
      <label>
        <span data-i18n="onlineName">Nombre</span>
        <input type="text" id="online-name" autocomplete="nickname">
      </label>

      <p class="online-note" data-i18n="onlineColdStart">
        Nota: la primera vez que se crea una sala, el servidor puede tardar un momento en responder (aprox 1 min). Si ocurre, recarga la p치gina y vuelve a intentarlo.
      </p>
      <button id="btn-create-room" type="button" data-i18n="createRoom">Crear sala</button>

      <label>
        <span data-i18n="roomCode">C칩digo de sala</span>
        <input type="text" id="online-code" autocomplete="off" autocapitalize="characters" spellcheck="false">
      </label>

      <button id="btn-join-room" type="button" data-i18n="joinRoom">Unirse a sala</button>

      <div id="online-settings" class="online-settings hidden">
        <label>
          <span data-i18n="impostors">Impostores</span>
          <input type="number" id="online-impostors" min="1" value="1">
        </label>

        <label>
          <span data-i18n="rounds">Rondas</span>
          <input type="number" id="online-rounds" min="1" value="3">
        </label>

        <label>
          <span data-i18n="theme">Tema</span>
          <select id="online-theme"></select>
        </label>

        <label id="online-custom-words-container" class="hidden">
          <span data-i18n="customWords">Palabras personalizadas (una por l칤nea)</span>
          <textarea id="online-custom-words"></textarea>
        </label>
      </div>

      <div id="online-lobby" class="online-lobby hidden">
        <p id="room-status" class="room-status"></p>
        <p id="room-note" class="room-note hidden"></p>
        <button id="btn-start-online" class="hidden" type="button" data-i18n="startOnline">Iniciar partida online</button>
        <button id="btn-restart-online" class="hidden" type="button" data-i18n="restartOnline">Reiniciar partida online</button>
        <ul id="player-list" class="player-list"></ul>
      </div>
    </div>
  </div>

  <footer class="footer">
    <span><span data-i18n="createdBy">Creado por</span> <strong>lameiro0x</strong></span>
    췅
    <a href="https://github.com/lameiro0x" target="_blank">GitHub</a>
    췅
    <a href="https://blog.lameiro0x.com" target="_blank">Blog</a>
  </footer>
</section>


<section id="screen-config" class="hidden">
  <h2 data-i18n="config">Configuraci칩n</h2>
  <p class="mode-description" data-i18n="offlineModeDesc">
    Este modo est치 pensado para jugar con un solo dispositivo. Los jugadores se van pasando el dispositivo para que cada uno vea su rol de forma privada.
  </p>
  <div class="mode-select">
    <button id="btn-switch-online" class="mode-btn" type="button" data-i18n="onlineMode">Modo online</button>
  </div>

  <label class="players-count-label">
    <span data-i18n="players">Selecciona el n칰mero de jugadores</span>
    <input type="number" id="players" min="3" value="0">
  </label>

  <label>
    <span data-i18n="playerNames">Nombres de jugadores (opcional)</span>
    <div id="player-names" class="player-names"></div>
  </label>

  <label>
    <span data-i18n="impostors">Impostores</span>
    <input type="number" id="impostors" min="1" value="1">
  </label>

  <label>
    <span data-i18n="rounds">Rondas</span>
    <input type="number" id="rounds" min="1" value="3">
  </label>

  <label>
    <span data-i18n="theme">Tema</span>
    <select id="theme">
      <option value="food">Comida</option>
      <option value="places">Lugares</option>
      <option value="custom">Personalizado</option>
    </select>
  </label>

  <p id="theme-preview" class="theme-preview hidden"></p>

  <label id="custom-words-container" class="hidden">
    <span data-i18n="customWords">Palabras personalizadas (una por l칤nea)</span>
    <textarea id="custom-words"></textarea>
  </label>

  <button id="btn-config-next" data-i18n="startGame">Empezar</button>
</section>

<section id="screen-role" class="hidden">
  <h2 id="player-title"></h2>
  <p id="round-indicator"></p>
  <button id="btn-show-role" data-i18n="viewRole">Ver mi rol</button>
  <div id="online-host-controls" class="online-host-controls hidden">
    <button id="btn-online-next-round" type="button" data-i18n="nextRound">Siguiente ronda</button>
    <button id="btn-online-end-game" type="button" data-i18n="endGame">Terminar partida</button>
  </div>
</section>

<div id="role-overlay" class="hidden">
  <div class="role-card">
    <p id="role-text"></p>
    <button id="btn-next-player" data-i18n="nextPlayer">Siguiente jugador</button>
  </div>
</div>

<div id="round-countdown" class="hidden">
  <div class="countdown-card">
    <p id="countdown-label" data-i18n="roundCountdown">Siguiente ronda en...</p>
    <div id="countdown-number">3</div>
  </div>
</div>

<section id="screen-round-end" class="hidden">
  <h2 id="round-title"></h2>
  <button id="btn-next-round" data-i18n="nextRound">Siguiente ronda</button>
  <button id="btn-end-game" data-i18n="endGame">Terminar partida</button>
</section>

<section id="screen-end" class="hidden">
  <h2 data-i18n="gameOver">Partida terminada</h2>
  <button id="btn-restart-same" data-i18n="restartSame">Reiniciar con la misma configuraci칩n</button>
  <button id="btn-restart" data-i18n="restart">Reiniciar</button>
</section>

<script src="js/i18n.js"></script>
<script>
  (function() {
    var host = window.location.hostname;
    var isLocal = host === "localhost" || host === "127.0.0.1";
    var src = isLocal
      ? "/socket.io/socket.io.js"
      : "https://impostor-game-b7vg.onrender.com/socket.io/socket.io.js";
    var script = document.createElement("script");
    window.__socketIoReady = new Promise(function(resolve, reject) {
      script.onload = function() {
        window.__socketIoFailed = false;
        resolve();
      };
      script.onerror = function() {
        window.__socketIoFailed = true;
        reject();
      };
    });
    script.src = src;
    script.async = true;
    document.head.appendChild(script);
  })();
</script>
<script src="js/game.js"></script>
</body>
</html>
